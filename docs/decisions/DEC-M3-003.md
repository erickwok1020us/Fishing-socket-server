# DEC-M3-003: HP Derivation Function

TYPE: DECISION
STATUS: UNRESOLVED
SCOPE: LOCAL
MODULE: M3 â€” Crypto Fairness (ZK HP)
AI_ACTION_ALLOWED: 0

## QUESTION

What is the exact HP derivation function: HP = f(seed, fishType, spawnIndex, roomId)?

## CONTEXT

- Bible M3: "HP = f(seed, fishType, spawnIndex, roomId)"
- Current: HP is derived from config hpRange using SeededRNG (fish3DGameEngine.js)
- Current: HP range is +-20-35% of base HP per fish type
- Bible Distribution: "Moderate HP range (+-20-35% of mean), center-weighted distribution"
- Function must be deterministic and reproducible for verification

## OPTIONS

| Option | Description |
|--------|-------------|
| A | HMAC-SHA256(seed, fishType + spawnIndex + roomId) mod hpRange |
| B | HKDF-derived HP using seed as IKM and fish params as info |
| C | Simple hash: SHA256(seed || fishType || spawnIndex || roomId) mod hpRange |

## DEPENDENCIES

- Requires: DEC-M3-001, DEC-M3-002

## ALLOWED ACTIONS

NONE.

## FORBIDDEN ACTIONS

- Do not modify HP calculation logic
