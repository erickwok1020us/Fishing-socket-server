# DEC-M1-001: Server Authority for Single-Player Mode

TYPE: DECISION
STATUS: UNRESOLVED
SCOPE: GLOBAL
MODULE: M1 â€” Network & Authority
AI_ACTION_ALLOWED: 0

## QUESTION

Must single-player mode route all game logic through the backend server, or can it run client-side?

## CONTEXT

- Bible M1 mandates: "Server validates cooldown / fire rate / hit detection"
- Bible M1 mandates: "Client cannot alter cost / fake hits / shoot faster than allowed"
- Current single-player mode runs ALL logic client-side in game.js (lines 13262-13317)
- Current single-player uses `Math.random()` instead of CSPRNG
- Current single-player calculates rewards locally with no server validation
- Multiplayer mode already uses server-authoritative model via Socket.IO

## OPTIONS

| Option | Description | Pros | Cons |
|--------|-------------|------|------|
| A | Server-authoritative single-player (connect to backend like multiplayer) | Full M1 compliance, same security model | Requires network, adds latency, no offline play |
| B | Embedded local server (WebWorker or local Node.js) | Offline capable, same security logic | Complex setup, CSPRNG in browser is weaker |
| C | Client-side with server-grade RNG (Web Crypto API) | Simple, offline, no latency | Client can still tamper, violates M1 spirit |

## DEPENDENCIES

- Blocks: DEC-M1-002, DEC-M1-003, DEC-TECH-001
- Blocks all M1 implementation for single-player
- Affects: M2, M4, M5 (all require server authority)

## ALLOWED ACTIONS

NONE. Decision must be resolved before any M1 implementation.

## FORBIDDEN ACTIONS

- Do not implement client-side game logic changes
- Do not modify server to support single-player without this decision
- Do not assume any option
